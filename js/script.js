// ==========================================
// TRANSLATIONS
// ==========================================
const translations = {
    ru: {
        // Slides
        slide1_title: "Ремонт и установка кондиционеров",
        slide1_desc: "Профессиональный монтаж, диагностика и ремонт кондиционеров всех типов. Заправка фреоном, чистка, восстановление работоспособности.",
        slide2_title: "Ремонт и установка чиллеров",
        slide2_desc: "Обслуживание и ремонт чиллерных систем: диагностика, пусконаладка и замена модулей.",
        slide3_title: "Ремонт VRF-систем",
        slide3_desc: "Квалифицированный ремонт VRF/VRV: поиск неисправностей, настройка и обслуживание.",
        slide4_title: "Ремонт всех видов котлов",
        slide4_desc: "Ремонт газовых, электрических и напольных котлов — замена деталей и обслуживание.",
        slide5_title: "Установка двухконтурных котлов",
        slide5_desc: "Монтаж и подключение под ключ, настройка отопления и ГВС.",
        slide6_title: "Монтаж сантехники",
        slide6_desc: "Установка смесителей, унитазов, душевых кабин, коллекторов и разводки труб.",
        cta_button: "Оставить заявку",
        
        // Services
        services_title: "Наши услуги",
        service1_title: "Ремонт и установка кондиционеров",
        service1_desc: "Профессиональный монтаж, диагностика и ремонт кондиционеров всех типов. Заправка фреоном, чистка, восстановление работоспособности.",
        service2_title: "Ремонт и установка чиллеров",
        service2_desc: "Обслуживание и ремонт чиллерных систем. Диагностика, настройка, пусконаладка, замена узлов и модулей.",
        service3_title: "Ремонт VRF-систем",
        service3_desc: "Квалифицированный ремонт и обслуживание VRF/VRV систем. Поиск неисправностей, настройка, восстановление работы.",
        service4_title: "Ремонт и обслуживание всех видов котлов",
        service4_desc: "Ремонт газовых, электрических и напольных котлов. Замена деталей, устранение ошибок, техническое обслуживание.",
        service5_title: "Установка двухконтурных котлов",
        service5_desc: "Монтаж и подключение двухконтурных котлов под ключ. Настройка системы отопления и горячего водоснабжения.",
        service6_title: "Монтаж сантехники",
        service6_desc: "Установка сантехнического оборудования: смесители, раковины, унитазы, душевые кабины, коллекторы, трубы.",
        
        // Features
        features_title: "Почему выбирают нас",
        feature1_title: "Высокое качество работ",
        feature1_desc: "Опытные специалисты выполняют монтаж и ремонт климатического оборудования на профессиональном уровне.",
        feature2_title: "Быстрое выполнение",
        feature2_desc: "Работаем оперативно: диагностика, ремонт и установка занимают минимальные сроки без потери качества.",
        feature3_title: "Современные технологии",
        feature3_desc: "Используем проверенные материалы, профессиональный инструмент и актуальные методы обслуживания.",
        feature4_title: "Наличие запчастей",
        feature4_desc: "Собственная база комплектующих и надёжные поставщики позволяют быстро выполнять ремонт без ожидания.",
        
        // Contact
        contact_title: "Свяжитесь с нами",
        contact_info_title: "Контактная информация",
        contact_address: "Адрес:",
        address_text: "г. Ташкент, Мирабадский район, Эски-Саракуль 3 тупик, №: 3",
        contact_phone: "Телефон:",
        contact_hours: "Режим работы:",
        hours_text: "Ежедневно с 9:00 до 19:00",
        contact_info_text: "Предварительную стоимость ремонта вы можете узнать, оставив заявку на сайте или позвонив в наш колл-центр.",
        
        // Form
        form_title: "Оставить заявку",
        form_name: "Ваше имя",
        form_phone: "Телефон",
        form_service: "Тип услуги",
        form_service_placeholder: "Например: Ремонт кондиционера",
        form_message: "Описание проблемы",
        form_submit: "Отправить заявку",
        form_success: "Спасибо за вашу заявку! Мы свяжемся с вами в ближайшее время по номеру",
        
        // Footer
        footer_about: "О нас",
        footer_about_text: "Наш центр ремонта в Ташкенте занимается квалифицированным обслуживанием и ремонтом бытовой техники для физических лиц и организаций. Мы работаем по всему Узбекистану и предоставляем услуги высокого качества.",
        footer_services: "Услуги",
        footer_service1: "Ремонт и установка кондиционеров",
        footer_service2: "Ремонт и установка чиллеров",
        footer_service3: "Ремонт VRF-систем",
        footer_service4: "Ремонт и обслуживание всех видов котлов",
        footer_contacts: "Контакты",
        footer_rights: "Все права защищены"
    },
    en: {
        // Slides
        slide1_title: "Air Conditioner Repair and Installation",
        slide1_desc: "Professional installation, diagnostics and repair of all types of air conditioners. Freon refilling, cleaning, performance restoration.",
        slide2_title: "Chiller Repair and Installation",
        slide2_desc: "Maintenance and repair of chiller systems: diagnostics, commissioning and module replacement.",
        slide3_title: "VRF System Repair",
        slide3_desc: "Qualified VRF/VRV repair: troubleshooting, tuning and maintenance.",
        slide4_title: "Repair of All Types of Boilers",
        slide4_desc: "Repair of gas, electric and floor boilers - parts replacement and maintenance.",
        slide5_title: "Double-Circuit Boiler Installation",
        slide5_desc: "Turnkey installation and connection, heating and hot water supply setup.",
        slide6_title: "Plumbing Installation",
        slide6_desc: "Installation of faucets, toilets, shower cabins, manifolds and pipe routing.",
        cta_button: "Submit Request",
        
        // Services
        services_title: "Our Services",
        service1_title: "Air Conditioner Repair and Installation",
        service1_desc: "Professional installation, diagnostics and repair of all types of air conditioners. Freon refilling, cleaning, performance restoration.",
        service2_title: "Chiller Repair and Installation",
        service2_desc: "Maintenance and repair of chiller systems. Diagnostics, tuning, commissioning, replacement of units and modules.",
        service3_title: "VRF System Repair",
        service3_desc: "Qualified repair and maintenance of VRF/VRV systems. Troubleshooting, tuning, performance restoration.",
        service4_title: "Repair and Maintenance of All Types of Boilers",
        service4_desc: "Repair of gas, electric and floor boilers. Parts replacement, error correction, technical maintenance.",
        service5_title: "Double-Circuit Boiler Installation",
        service5_desc: "Turnkey installation and connection of double-circuit boilers. Heating and hot water supply system setup.",
        service6_title: "Plumbing Installation",
        service6_desc: "Installation of plumbing equipment: faucets, sinks, toilets, shower cabins, manifolds, pipes.",
        
        // Features
        features_title: "Why Choose Us",
        feature1_title: "High Quality Work",
        feature1_desc: "Experienced specialists perform installation and repair of climate equipment at a professional level.",
        feature2_title: "Fast Service",
        feature2_desc: "We work efficiently: diagnostics, repair and installation take minimal time without losing quality.",
        feature3_title: "Modern Technologies",
        feature3_desc: "We use proven materials, professional tools and current maintenance methods.",
        feature4_title: "Parts Availability",
        feature4_desc: "Our own component base and reliable suppliers allow us to quickly perform repairs without waiting.",
        
        // Contact
        contact_title: "Contact Us",
        contact_info_title: "Contact Information",
        contact_address: "Address:",
        address_text: "Tashkent, Mirabad district, Eski-Sarakul 3 lane, №: 3",
        contact_phone: "Phone:",
        contact_hours: "Working Hours:",
        hours_text: "Daily from 9:00 to 19:00",
        contact_info_text: "You can find out the preliminary cost of repair by leaving a request on the website or calling our call center.",
        
        // Form
        form_title: "Submit Request",
        form_name: "Your Name",
        form_phone: "Phone",
        form_service: "Service Type",
        form_service_placeholder: "For example: Air conditioner repair",
        form_message: "Problem Description",
        form_submit: "Send Request",
        form_success: "Thank you for your request! We will contact you soon at",
        
        // Footer
        footer_about: "About Us",
        footer_about_text: "Our repair center in Tashkent provides qualified service and repair of household appliances for individuals and organizations. We work throughout Uzbekistan and provide high quality services.",
        footer_services: "Services",
        footer_service1: "Air Conditioner Repair and Installation",
        footer_service2: "Chiller Repair and Installation",
        footer_service3: "VRF System Repair",
        footer_service4: "Repair and Maintenance of All Types of Boilers",
        footer_contacts: "Contacts",
        footer_rights: "All Rights Reserved"
    },
    uz: {
        // Slides
        slide1_title: "Konditsionerlarni ta'mirlash va o'rnatish",
        slide1_desc: "Barcha turdagi konditsionerlarni professional o'rnatish, diagnostika va ta'mirlash. Freon quyish, tozalash, ishlashni tiklash.",
        slide2_title: "Chillerlarni ta'mirlash va o'rnatish",
        slide2_desc: "Chiller tizimlarini xizmat ko'rsatish va ta'mirlash: diagnostika, ishga tushirish va modullarni almashtirish.",
        slide3_title: "VRF tizimlarini ta'mirlash",
        slide3_desc: "VRF/VRV malakali ta'mirlash: nosozliklarni aniqlash, sozlash va xizmat ko'rsatish.",
        slide4_title: "Barcha turdagi qozonlarni ta'mirlash",
        slide4_desc: "Gaz, elektr va pol qozonlarini ta'mirlash - qismlarni almashtirish va xizmat ko'rsatish.",
        slide5_title: "Ikki konturli qozonlarni o'rnatish",
        slide5_desc: "Kalit ostida o'rnatish va ulash, isitish va issiq suv ta'minotini sozlash.",
        slide6_title: "Santexnika o'rnatish",
        slide6_desc: "Smesellar, unitazlar, dush kabinalari, kollektorlar va quvurlarni o'rnatish.",
        cta_button: "So'rov qoldirish",
        
        // Services
        services_title: "Bizning xizmatlar",
        service1_title: "Konditsionerlarni ta'mirlash va o'rnatish",
        service1_desc: "Barcha turdagi konditsionerlarni professional o'rnatish, diagnostika va ta'mirlash. Freon quyish, tozalash, ishlashni tiklash.",
        service2_title: "Chillerlarni ta'mirlash va o'rnatish",
        service2_desc: "Chiller tizimlarini xizmat ko'rsatish va ta'mirlash. Diagnostika, sozlash, ishga tushirish, qismlar va modullarni almashtirish.",
        service3_title: "VRF tizimlarini ta'mirlash",
        service3_desc: "VRF/VRV tizimlarini malakali ta'mirlash va xizmat ko'rsatish. Nosozliklarni aniqlash, sozlash, ishni tiklash.",
        service4_title: "Barcha turdagi qozonlarni ta'mirlash va xizmat ko'rsatish",
        service4_desc: "Gaz, elektr va pol qozonlarini ta'mirlash. Qismlarni almashtirish, xatolarni bartaraf etish, texnik xizmat ko'rsatish.",
        service5_title: "Ikki konturli qozonlarni o'rnatish",
        service5_desc: "Ikki konturli qozonlarni kalit ostida o'rnatish va ulash. Isitish va issiq suv ta'minoti tizimini sozlash.",
        service6_title: "Santexnika o'rnatish",
        service6_desc: "Santexnika uskunalarini o'rnatish: smesellar, lavabolar, unitazlar, dush kabinalari, kollektorlar, quvurlar.",
        
        // Features
        features_title: "Nima uchun bizni tanlaydilar",
        feature1_title: "Yuqori sifatli ish",
        feature1_desc: "Tajribali mutaxassislar iqlim uskunalarini professional darajada o'rnatish va ta'mirlashni amalga oshiradilar.",
        feature2_title: "Tez bajarish",
        feature2_desc: "Biz tez ishlaymiz: diagnostika, ta'mirlash va o'rnatish sifatni yo'qotmasdan minimal vaqtni oladi.",
        feature3_title: "Zamonaviy texnologiyalar",
        feature3_desc: "Biz sinovdan o'tgan materiallar, professional asboblar va hozirgi xizmat ko'rsatish usullaridan foydalanamiz.",
        feature4_title: "Ehtiyot qismlar mavjudligi",
        feature4_desc: "O'z komponentlar bazasi va ishonchli yetkazib beruvchilar kutmasdan tezda ta'mirlashni amalga oshirishga imkon beradi.",
        
        // Contact
        contact_title: "Biz bilan bog'laning",
        contact_info_title: "Aloqa ma'lumotlari",
        contact_address: "Manzil:",
        address_text: "Toshkent sh., Mirobod tumani, Eski-Sarakul 3-tupik, №: 3",
        contact_phone: "Telefon:",
        contact_hours: "Ish tartibi:",
        hours_text: "Har kuni 9:00 dan 19:00 gacha",
        contact_info_text: "Ta'mirlashning dastlabki narxini saytda so'rov qoldirib yoki qo'ng'iroq markazimizga qo'ng'iroq qilib bilib olishingiz mumkin.",
        
        // Form
        form_title: "So'rov qoldirish",
        form_name: "Ismingiz",
        form_phone: "Telefon",
        form_service: "Xizmat turi",
        form_service_placeholder: "Masalan: Konditsianer ta'mirlash",
        form_message: "Muammo tavsifi",
        form_submit: "So'rov yuborish",
        form_success: "So'rovingiz uchun rahmat! Biz tez orada siz bilan bog'lanamiz",
        
        // Footer
        footer_about: "Biz haqimizda",
        footer_about_text: "Toshdagi ta'mirlash markazimiz jismoniy shaxslar va tashkilotlar uchun maishiy texnikani malakali xizmat ko'rsatish va ta'mirlash bilan shug'ullanadi. Biz butun O'zbekiston bo'ylab ishlaymiz va yuqori sifatli xizmatlar ko'rsatamiz.",
        footer_services: "Xizmatlar",
        footer_service1: "Konditsionerlarni ta'mirlash va o'rnatish",
        footer_service2: "Chillerlarni ta'mirlash va o'rnatish",
        footer_service3: "VRF tizimlarini ta'mirlash",
        footer_service4: "Barcha turdagi qozonlarni ta'mirlash va xizmat ko'rsatish",
        footer_contacts: "Aloqa",
        footer_rights: "Barcha huquqlar himoyalangan"
    }
};

// ==========================================
// LANGUAGE SWITCHING
// ==========================================
let currentLang = 'ru';

function changeLanguage(lang) {
    currentLang = lang;
    
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update placeholder
    const serviceInput = document.getElementById('service');
    if (serviceInput && translations[lang]['form_service_placeholder']) {
        serviceInput.placeholder = translations[lang]['form_service_placeholder'];
    }
    
    // Update active button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        }
    });
    
    // Save to localStorage
    localStorage.setItem('language', lang);
}

// Language button click handlers
document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        const lang = btn.getAttribute('data-lang');
        changeLanguage(lang);
    });
});

// Load saved language on page load
window.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('language') || 'ru';
    changeLanguage(savedLang);
});

// ==========================================
// CAROUSEL FUNCTIONALITY
// ==========================================
(function() {
    const slides = Array.from(document.querySelectorAll('.slide'));
    const prevBtn = document.querySelector('.nav.prev');
    const nextBtn = document.querySelector('.nav.next');
    const indicatorsWrap = document.querySelector('.indicators');
    let idx = 0;
    let interval = null;
    const delay = 5000; // ms между слайдами

    // Создаём индикаторы
    slides.forEach((s, i) => {
        const btn = document.createElement('button');
        btn.addEventListener('click', () => goTo(i));
        indicatorsWrap.appendChild(btn);
    });

    const indicators = Array.from(indicatorsWrap.children);

    function update() {
        slides.forEach(s => s.classList.remove('active'));
        indicators.forEach(i => i.classList.remove('active'));
        slides[idx].classList.add('active');
        indicators[idx].classList.add('active');
    }

    function next() {
        idx = (idx + 1) % slides.length;
        update();
    }

    function prev() {
        idx = (idx - 1 + slides.length) % slides.length;
        update();
    }

    function goTo(i) {
        idx = i;
        update();
        resetTimer();
    }

    prevBtn.addEventListener('click', () => {
        prev();
        resetTimer();
    });

    nextBtn.addEventListener('click', () => {
        next();
        resetTimer();
    });

    // Автоплей
    function startTimer() {
        interval = setInterval(next, delay);
    }

    function stopTimer() {
        clearInterval(interval);
        interval = null;
    }

    function resetTimer() {
        stopTimer();
        startTimer();
    }

    // Пауза при наведении
    const carousel = document.querySelector('.carousel');
    carousel.addEventListener('mouseenter', stopTimer);
    carousel.addEventListener('mouseleave', startTimer);

    // Старт
    update();
    startTimer();
})();

// ==========================================
// SMOOTH SCROLLING FOR ANCHOR LINKS
// ==========================================
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// ==========================================
// FORM SUBMISSION HANDLER
// ==========================================
document.getElementById('contactForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const name = document.getElementById('name').value;
    const phone = document.getElementById('phone').value;
    const service = document.getElementById('service').value;
    const message = document.getElementById('message').value;
    
    // Show success message in current language
    const successMsg = translations[currentLang]['form_success'];
    alert(successMsg + ' ' + phone);
    
    // Reset form
    this.reset();
});

// ==========================================
// SCROLL ANIMATION FOR SERVICE CARDS
// ==========================================
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
};

const observer = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = '0';
            entry.target.style.transform = 'translateY(20px)';
            setTimeout(() => {
                entry.target.style.transition = 'all 0.6s ease';
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }, 100);
            observer.unobserve(entry.target);
        }
    });
}, observerOptions);

document.querySelectorAll('.service-card, .feature-item').forEach(card => {
    observer.observe(card);
});
